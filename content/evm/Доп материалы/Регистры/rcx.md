#  Регистр RCX: Основы и Применение в Ассемблере

##  Введение

Регистр RCX (Extended Count Register) является одним из основных регистров общего назначения в архитектуре x86-64 процессоров Intel. В этой статье мы рассмотрим основные аспекты работы с регистром RCX, его функции и применение в программировании на ассемблере.

##  Основы регистра RCX

Регистр RCX является 64-битным регистром, который представляет собой расширенную версию 32-битного регистра ECX и 16-битного регистра CX. Как и другие регистры общего назначения, RCX может быть доступен в различных размерах:

- **RCX (64 бита)**: Основной регистр счетчика.
- **ECX (32 бита)**: Нижняя половина регистра RCX.
- **CX (16 бит)**: Нижняя половина регистра ECX.
- **CH (8 бит)**: Старший байт регистра CX.
- **CL (8 бит)**: Младший байт регистра CX.

##  Основные функции регистра RCX

1. **Циклы и итерации**: RCX часто используется в качестве счетчика циклов в инструкциях цикла, таких как LOOP, REP, и REPZ/REPNZ.
   
2. **Взаимодействие с операндами**: RCX может использоваться для хранения операндов в различных арифметических и логических операциях.

3. **Параметры функций**: В некоторых соглашениях о вызовах функций (calling conventions), таких как Microsoft x64 и System V AMD64, RCX используется для передачи первого аргумента функции.

##  Примеры использования регистра RCX

###  Использование в циклах

```assembly
section .data
    array db 1, 2, 3, 4, 5  ; массив данных

section .text
    global _start

_start:
    mov rcx, 5         ; установить количество элементов в массиве
    lea rsi, [array]   ; загрузить адрес массива в RSI

loop_start:
    dec rcx            ; уменьшить значение RCX
    mov al, [rsi + rcx] ; загрузить текущий элемент массива в AL
    ; Выполнить операции с элементом массива
    test rcx, rcx      ; проверить, достиг ли счетчик нуля
    jnz loop_start     ; если нет, перейти к началу цикла

    ; завершение программы
    mov eax, 60        ; syscall номер (exit)
    xor edi, edi       ; код возврата 0
    syscall
```

###  Вызовы функций

```assembly
section .data
    message db "Hello, World!", 0

section .text
    global _start

extern _puts

_start:
    lea rcx, [message] ; загрузить адрес строки в RCX
    call _puts         ; вызвать функцию _puts
    ; завершение программы
    mov eax, 60        ; syscall номер (exit)
    xor edi, edi       ; код возврата 0
    syscall
```

###  Арифметические и логические операции

```assembly
section .data
    num1 dq 100
    num2 dq 50

section .text
    global _start

_start:
    mov rcx, [num1]    ; загрузить значение num1 в RCX
    sub rcx, [num2]    ; вычесть значение num2 из RCX
    ; Теперь RCX содержит 50

    ; завершение программы
    mov eax, 60        ; syscall номер (exit)
    xor edi, edi       ; код возврата 0
    syscall
```

##  Заключение

Регистр RCX является важным элементом в арсенале программиста на ассемблере. Его использование в качестве счетчика циклов, хранения операндов и передачи параметров функций делает его универсальным и мощным инструментом. Понимание работы с регистром RCX и его применение помогает создавать эффективный и оптимизированный код на ассемблере.