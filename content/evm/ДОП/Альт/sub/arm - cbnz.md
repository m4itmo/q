---
title: Команда cbnz в arm ассемблере
---
# Введение

Команда `cbnz` (Compare and Branch if Non-Zero) является одной из команд условного перехода в языке ассемблера для архитектуры ARM. Она сравнивает значение регистра с нулем и выполняет переход к указанной метке, если значение не равно нулю. Это мощный инструмент для создания циклов и условных конструкций в ассемблерном коде.

# Основная часть

## Синтаксис команды `cbnz`

Синтаксис команды `cbnz` следующий:

```assembly
cbnz <register>, <label>
```

Где `<register>` — это регистр, значение которого проверяется, а `<label>` — это метка, к которой осуществляется переход, если значение регистра не равно нулю.

### Примеры использования команды `cbnz`

#### Пример 1: Простой цикл с использованием `cbnz`

Рассмотрим пример использования `cbnz` для создания простого цикла, который выполняется, пока значение в регистре не станет нулевым.

```assembly
mov x0, #10       // Инициализация регистра x0 значением 10
loop:             // Метка начала цикла
sub x0, x0, #1    // Уменьшение значения в регистре x0 на 1
cbnz x0, loop     // Переход к метке loop, если значение в x0 не равно нулю
```

В этом примере создается цикл, который уменьшает значение в регистре `x0` с 10 до 0, и команда `cbnz` обеспечивает возврат к началу цикла, пока `x0` не станет равным нулю.

#### Пример 2: Условный переход

Команда `cbnz` также может использоваться для выполнения условного перехода на основе значения регистра. Рассмотрим следующий пример:

```assembly
mov x1, #5        // Инициализация регистра x1 значением 5
cbnz x1, not_zero // Если значение в x1 не равно нулю, перейти к метке not_zero
// Выполнение кода, если x1 равно нулю
...
not_zero:         // Метка, если значение в x1 не равно нулю
// Выполнение кода, если x1 не равно нулю
...
```

Здесь, если значение в `x1` не равно нулю, программа перейдет к метке `not_zero`, где будет выполнен соответствующий код.

#### Пример 3: Комбинированный цикл и условный переход

Команда `cbnz` часто используется в комбинации с другими командами для создания сложных управляющих структур. Рассмотрим пример, где используется цикл с условным переходом внутри:

```assembly
mov x2, #5         // Инициализация регистра x2 значением 5
mov x3, #10        // Инициализация регистра x3 значением 10
loop:              // Метка начала цикла
cmp x2, x3         // Сравнение значений в регистрах x2 и x3
cbnz x2, not_equal // Переход к метке not_equal, если x2 не равно x3
// Выполнение кода, если x2 равно x3
...
b end_loop         // Переход к метке end_loop
not_equal:         // Метка, если x2 не равно x3
// Выполнение кода, если x2 не равно x3
sub x2, x2, #1     // Уменьшение значения в x2 на 1
cbnz x2, loop      // Переход к началу цикла, если значение в x2 не равно нулю
end_loop:          // Метка окончания цикла
```

В этом примере создается цикл, который проверяет равенство двух регистров и выполняет соответствующий код в зависимости от результата сравнения. Если значение в `x2` не равно `x3`, цикл продолжается, уменьшая значение `x2` на 1 каждый раз.

# Вывод

Команда `cbnz` является важным инструментом в арсенале разработчика ассемблерного кода на архитектуре ARM. Она позволяет выполнять условные переходы и создавать циклы, что делает её незаменимой для управления потоком выполнения программы. Понимание работы и возможностей команды `cbnz` помогает эффективно использовать ассемблер для создания высокопроизводительных программ.