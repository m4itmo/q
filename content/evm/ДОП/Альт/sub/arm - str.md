---
title: Команда str в arm ассемблере
---
# Введение

Команда `str` в языке ассемблера используется для сохранения данных из регистра в память. Она является ключевой при работе с памятью, позволяя сохранять вычисленные значения, данные для последующего использования или обмениваться данными между различными частями программы. В этой статье мы подробно рассмотрим работу команды `str`, её синтаксис, различные варианты использования и примеры.

# Основная часть

## Синтаксис команды `str`

Команда `str` (store register) используется для перемещения данных из регистра в память. Общий синтаксис команды `str` следующий:

```assembly
str source, [address]
```

Где `source` — это регистр, из которого берутся данные, а `address` — это адрес памяти, куда данные будут сохранены.

### Примеры использования команды `str`

#### Пример 1: Сохранение значения регистра в память по адресу, хранящемуся в другом регистре

```assembly
str x0, [x1]
```

В этом примере значение из регистра `x0` сохраняется по адресу, хранящемуся в регистре `x1`.

#### Пример 2: Сохранение значения регистра в память с использованием смещения

```assembly
str x0, [x1, #4]
```

Значение из регистра `x0` сохраняется по адресу, который получается путем добавления смещения `4` к значению в регистре `x1`.

#### Пример 3: Постинкремент адреса

```assembly
str x0, [x1], #4
```

Этот пример сохраняет значение из регистра `x0` по адресу, хранящемуся в регистре `x1`, а затем увеличивает `x1` на `4`.

#### Пример 4: Прединкремент адреса

```assembly
str x0, [x1, #4]!
```

В этом случае смещение `4` добавляется к регистру `x1` до выполнения операции сохранения, и значение из регистра `x0` сохраняется по новому адресу.

### Детальное рассмотрение примеров

#### Пример 1: Базовая операция сохранения

Рассмотрим более детально, как происходит базовая операция сохранения значения регистра в память.

```assembly
str x0, [x1]
```

Допустим, регистр `x0` содержит значение `42`, а регистр `x1` содержит адрес `0x1000`. После выполнения этой команды значение `42` будет сохранено по адресу `0x1000` в памяти.

#### Пример 2: Сохранение с использованием смещения

Теперь рассмотрим пример со смещением.

```assembly
str x0, [x1, #4]
```

Предположим, что регистр `x0` содержит значение `42`, а регистр `x1` содержит адрес `0x1000`. После выполнения этой команды значение `42` будет сохранено по адресу `0x1004` (адрес `0x1000` плюс смещение `4`).

#### Пример 3: Постинкремент

Рассмотрим пример с постинкрементом.

```assembly
str x0, [x1], #4
```

Если регистр `x0` содержит значение `42`, а регистр `x1` содержит адрес `0x1000`, то после выполнения команды значение `42` будет сохранено по адресу `0x1000`, а значение регистра `x1` будет увеличено на `4` и станет равным `0x1004`.

#### Пример 4: Прединкремент

Наконец, пример с прединкрементом.

```assembly
str x0, [x1, #4]!
```

Если регистр `x0` содержит значение `42`, а регистр `x1` содержит адрес `0x1000`, то перед сохранением к адресу `0x1000` добавляется смещение `4`, и значение `42` будет сохранено по новому адресу `0x1004`. Значение регистра `x1` также изменится на `0x1004`.

# Вывод

Команда `str` является одной из ключевых команд при работе с памятью в ассемблере, позволяя сохранять данные из регистров в память. Понимание различных вариантов её использования, таких как базовая операция, использование смещений, пост- и прединкременты, позволяет эффективно управлять памятью и оптимизировать работу программы. Эти примеры демонстрируют важность и гибкость команды `str` в различных сценариях работы с памятью.